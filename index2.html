<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="finalResult"></div>
    <div id="displayScore"></div>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>
    <div id="container"></div>
<script>
    const finalResult = document.querySelector('#finalResult');
    const displayScore = document.querySelector('#displayScore');
    const buttons = document.querySelectorAll('button');
    let playerScore = 0;
    let computerScore = 0;
    buttons.forEach((button) => {
        button.addEventListener('click', () => {
            const container = document.querySelector('#container');

            const result = document.createElement('p');
            let playRoundResult = playRound(button.id, computerPlay());
            result.textContent = playRoundResult;
            container.appendChild(result);
            console.log(playRoundResult);

            calcScore(playRoundResult);

            displayScore.textContent = `YOU: ${playerScore} / COMPUTER: ${computerScore}`;

            if(playerScore === 5) {
                finalResult.textContent = 'You Won';
                buttons.setAttribute('disabled', 'true');
            } else if(computerScore === 5) {
                finalResult.textContent = 'You losed';
                buttons.setAttribute('disabled', 'true');
            }
    })})
    
    function calcScore(score) {
        if (score.indexOf("Win") === 4) {
                playerScore++;
            } 
        else if (score.indexOf("Lose") === 4) {
                computerScore++;
            }
    }

    function computerPlay() {
        const playOption = ["rock", "paper", "scissors"];
        return playOption[Math.floor(Math.random() * 3)];
    }

    function toCapital(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
    }

    function playRound(playerSelection, computerSelection) {
    
        switch(true) {
            case playerSelection === "rock" && computerSelection === "paper":
            case playerSelection === "paper" && computerSelection === "scissors":
            case playerSelection === "scissors" && computerSelection === "rock":
                return `You Lose! ${toCapital(computerSelection)} beats ${toCapital(playerSelection)}`;
                break;
        
            case playerSelection === "paper" && computerSelection === "rock":
            case playerSelection === "scissors" && computerSelection === "paper":
            case playerSelection === "rock" && computerSelection === "scissors":
                return `You Win! ${toCapital(playerSelection)} beats ${toCapital(computerSelection)}`;
                break;
            
            default:
                return "Draw! Let's play more";
        }

    }

/*
function game() {
    let playerScore = 0;
    let computerScore = 0;
    
    for (let i = 0; i < 5; i++) {
        let userInput = window.prompt("Welcome, please input rock, paper, or scissors", "rock");
        let result = playRound(userInput, computerPlay());
        if (result.indexOf("Win") === 4) {
            playerScore++;
            console.log(result);
        } else if (result.indexOf("Lose") === 4) {
            computerScore++;
            console.log(result);
        } else if (result.indexOf("!") === 4) {
            console.log(result);
        } else {
            console.log(result);
        }
        console.log(`You: ${playerScore} Computer: ${computerScore}`);
    }

    switch(true) {
        case playerScore > computerScore:
            console.log(`Final result: You win\nYou: ${playerScore} Computer: ${computerScore}`);
            break;
        case playerScore < computerScore:
            console.log(`Final result: You lose\nYou: ${playerScore} Computer: ${computerScore}`);
            break;
        default:
            console.log("Final result: Draw!");
    }
    

}


game();
*/

</script>
</body>
</html>